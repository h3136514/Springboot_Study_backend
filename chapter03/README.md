
**Chapter 03**

**스프링 부트 3 구조 이해하기**

**Chapter 03 스프링 부트 3 구조 이해하기**

1. **스프링 부트 3 구조 살펴보기**
1. 카페와 빵집으로 이해하는 계층
1. 스프링 부트 프로젝트 디렉터리 구성하며 살펴보기
1. main 디렉터리 구성하기
2. **스프링 부트 3 프로젝트 발전시키기**
1. build.gradle에 의존성 추가하기
1. 프레젠테이션, 서비스, 퍼시스턴스 계층 만들기
1. 임포트 오류 처리하기
1. 작동 확인하기
3. **스프링 부트 요청-응답 한 방에 이해하기**

1. **스프링 부트 3 구조 살펴보기**

1. **카페와 빵집으로 이해하는 계층**

구현!

역할!, 패키지![](./img/Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.001.png)![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.002.png)![](./img/Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.003.png)

**프레젠테이션 계층**

- 클라이언트의 요청을 처리하는 부분!
- HTTP 요청을 받고 이 요청을 비즈니스 계층으로 전송하는 역할

1. **카페와 빵집으로 이해하는 계층**

HTTP 요청!![](./img/Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.004.png)

![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.005.png)

응답!

![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.006.png)

비즈니스 계층아! 사용자한테 이러한 요청이 왔는데 처리 좀 해줘!

1. **카페와 빵집으로 이해하는 계층**

**비즈니스 계층**

- 모든 비즈니스 로직(서비스를 만들기 위한 로직)을 처리!
- 컨트롤러(Controller)와 리포지토리(Repository) 사이의 중재자 역할
- 클라이언트와 데이터베이스 사이의 효율적인 의사소통을 도와줌.
- 주문 처리, 결제 확인, 상품 검색 등등

1. **카페와 빵집으로 이해하는 계층**

HTTP 요청!![ref1]

![ref2]

응답!

![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.009.png)

컨트롤러에서 넘어온 사용자의 요청을 위해 비즈니스 로직을 처리

1. **카페와 빵집으로 이해하는 계층**

**퍼시스턴스 계층**

- 모든 데이터베이스 관련 로직을 처리! => CRUD 처리
- 이 과정에서 데이터베이스에 접근하는 DAO 객체를 사용도 가능!
- DAO를 통해서 데이터베이스 계층과 상호작용 하기 위함.  데이터 필요? OK 저장해줘? OK![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.010.png)

수정해줘? OK 삭제해줘? OK

HTTP 요청! ![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.011.png)![ref1]

![ref2]

응답! 


**3.1.2 스프링 부트 프로젝트 디렉터리 구성하며 살펴보기**

- 실제 코드를 작성하는 공간![ref3]![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.013.png)
- 소스 코드나 리소스 파일은 모두 이 폴더 안에 존재![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.014.png)
- 테스트 코드가 위치
- 프로젝트의 소스 코드를 테스트할 목적의 코드나 리 소스 파일이 들어 있음
- 주로 Junit 또는 Mockito와 같은 테스트 프레임워크 를 사용하여 단위 테스트, 통합 테스트, 또는 시스템 테스트를 작성하는데 사용됨

**3.1.2 스프링 부트 프로젝트 디렉터리 구성하며 살펴보기**

- 빌드를 설정하는 파일![ref3]![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.015.png)
- 의존성이나 플러그인 설정 등과 같이 빌드에 필요한 설정을 할 때 사용![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.016.png)
- Ex) jpa 라이브러리를 사용해야 하니까 관련 의존성 을 추가해야 겠다!

의존성 추가!!

![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.017.png)

2. **스프링 부트 프로젝트 디렉터리 구성하며 살펴보기**
- 빌드할 프로젝트의 정보를 설정하는 파일![ref3]![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.018.png)
- 예) 도서관의 관리자가 있고 도서관에 있는 책들의 목록을 정의하는 역할. 목록에는 각 책의 제목과 위 치가 포함됨. ‘settings.gradle’ 파일은 마치 이 도서 ![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.019.png)목록과 비슷한 역할.
- 아! Gradle 프로젝트의 정보를 담고 있는 메타 정보 와 같은 느낌을 알 수 있음! 
3. **main 디렉터리 구성하기**
- 자바 소스 코드가 위치![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.020.png)
- 주로 애플리케이션의 핵심 로직을 구현하는 클래스들이 ![ref4]여기에 위치
- 스프링 빈, 컨트롤러, 서비스, 리포지토리 등이 주로 이곳 에 작성
- 애플리케이션의 구성 파일이나 정적 리소스들이 위치



|||
| :- | :- |
|||
**3.1.3 main 디렉터리 구성하기**

- 정적 리소스들이 위치![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.022.png)
- 주로 HTML, CSS, JavaScript, 이미지 등이 저장![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.023.png)
- 브라우저에 직접 제공되어 클라이언트의 웹 페이지에 ![ref4]영향을 줌
- 템플릿 엔진을 사용하여 동적으로 생성되는 웹 페이지 의 템플릿들이 위치
- 주로 타임리프, 프리마커, 머스태치, JSP와 같은 템플릿 엔진을 사용하는 경우 templates 디렉토리에 파일들이 저장됨

**3.1.3 main 디렉터리 구성하기**

- 스프링 부트 애플리케이션의 설정을 관리하는데 사용![ref4]![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.024.png)
- 스프링 부트 서버가 실행되면 자동으로 로딩되는 파일![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.025.png)
- 즉 해당 파일을 읽어서 애플리케이션의 동작을 설정!
- 데이터베이스의 설정 정보, 로깅 설정 정보, 포트 번호, 외부 서비스의 URL 등등

![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.026.png)

2. **스프링 부트 3 프로젝트 발전 시키기**

**3.2.1 build.gradle에 의존성 추가하기**

![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.027.png) 의존성 추가!!!![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.028.jpeg)![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.029.png)![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.030.png)

2. **프레젠테이션, 서비스, 퍼시스턴스 계층 만들기**

**프레젠테이션 계층의 코드**

![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.031.png)

**서비스 계층의 코드**

![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.032.png)

**현재 까지의 상황을 잠시 그림으로 짚고 넘어가기**

` `![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.033.png)![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.034.png)

**퍼시스턴스 계층 만들기**

Member 클래스![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.035.jpeg)

MemberRepository 인터페이스![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.036.png)


3. **임포트 오류 처리하기**

Alt + Enter 를 눌러서 처리하시면 됩니다~^^

4. **작동 확인하기**

**작동 확인 전 데이터를 미리 준비하기 위해 파일을 만들기**

![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.037.jpeg)  ![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.038.png)![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.039.png)

**작동 확인 전 데이터를 미리 준비하기 위해 파일을 만들기**

![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.040.png)

**data.sql?**

- 스프링 부트 애플리케이션이 시작될 때 자동으로 실행되는 SQL 스크립트 파일
- 이 파일은 애플리케이션을 초기화할 때 데이터베이스에 초기 데이터를 삽입하고 설정하는데 사용된다.
- 주로 개발 및 테스트 환경에서 사용되며, 애플리케이션을 시작할 때마다 일관된 초기 데이터를 제공하는데 도움 이 된다.

**application.yml 파일 설정하기**

계층 구조의 형태로 표현하기에 코드의 중복 작성을 줄일 수 있음!!!![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.041.jpeg)

![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.042.png)

**실행!**

![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.043.png)


4. **프레젠테이션, 서비스, 퍼시스턴스 계층 만들기**

**그림으로 다시 한번 정리해보기**

` `![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.044.png)![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.045.png)

3. **스프링 부트 요청-응답 과정 한 방에 이해하기**

URL을 분석해서, 어? 이 요청에 대한 컨트롤러가 있나 한번 찾아볼까?

디스패처 서블릿

![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.046.png)

**뷰 리졸버?![](Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.047.png)**

Client 컨트롤러에서 리턴한 뷰 이름을 기반으로 실제 뷰 객체를 찾아 반환하는역할

쉽게 말해, 클라이언트에게  보여줄 화면을 결정하는 것!

템플릿 엔진과의 연동을 담당하며, 컨트롤러가 반환한 뷰 이름을 해석하여 적 절한 템플릿 파일을 찾아 제공!

[ref1]: Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.007.png
[ref2]: Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.008.png
[ref3]: Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.012.png
[ref4]: Aspose.Words.b2654a19-cd52-47ed-ab43-05cb61eac369.021.png
